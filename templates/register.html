<!DOCTYPE html>
<html lang="en">

<!--================================================================================
	Item Name: Materialize - Material Design Admin Template
	Version: 3.1
	Author: GeeksLabs
	Author URL: http://www.themeforest.net/user/geekslabs
================================================================================ -->


<!-- Mirrored from demo.geekslabs.com/materialize/v3.1/user-login.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Aug 2017 19:31:40 GMT -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
	<title>Register | Multipyer</title>

	<!-- Favicons-->
	<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
	<link rel="manifest" href="/favicons/manifest.json">
	<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="/favicons/favicon.ico">
	<meta name="msapplication-config" content="/favicons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
	<!-- For Windows Phone -->


	<!-- CORE CSS-->

	<link href="{{ url_for('static',filename='css/material-icons.css') }}" rel="stylesheet">
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="{{ url_for('static',filename='css/materialize.css') }}"
		  media="screen,projection"/>

	<link type="text/css" rel="stylesheet" href="{{ url_for('static',filename='css/custom.css') }}"
		  media="screen,projection"/>

	<style>
		html,
body {
    height: 100%;
}
html {
    display: table;
    margin: auto;
}
body {
    display: table-cell;
    vertical-align: middle;
}

.row .margin {
margin: 0 !important;
}

.login-form-text {
    text-transform: uppercase;
    letter-spacing: 2px;
    font-size: 0.8rem;
}

.medium-small {
    font-size: 0.9rem;
    margin: 0;
    padding: 0;
}

.z-depth-4, .modal {
    box-shadow: 0 16px 28px 0 rgba(0,0,0,0.22), 0 25px 55px 0 rgba(0,0,0,0.21);
}

.material-icons {
line-height: inherit;
}




	</style>

	<!-- INCLUDED PLUGIN CSS ON THIS PAGE -->

</head>

<body class="light-blue lighten-1">
<!-- Start Page Loading -->
<div id="loader-wrapper">
	<div id="loader"></div>
	<div class="loader-section section-left"></div>
	<div class="loader-section section-right"></div>
</div>
<!-- End Page Loading -->


<div id="login-page" class="row">
	<div class="col s12 z-depth-4 card-panel">
		<form class="login-form" method="post">
			<div class="row">
				<div class="input-field col s12 center">
					<h4>Register</h4>
					<p class="center">Start developing now!</p>
				</div>
			</div>
			<div class="row margin">
				<div class="input-field col s12">
					<i class="material-icons prefix">person_outline</i>
					<input name="username" id="username" type="text">
					<label for="username" class="center-align">Username</label>
				</div>
			</div>
			<div class="row margin">
				<div class="input-field col s12">
					<i class="material-icons prefix">email</i>
					<input name="email" id="email" type="email">
					<label for="email" class="center-align">Email</label>
				</div>
			</div>
			<div class="row margin">
				<div class="input-field col s12">
					<i class="material-icons prefix">lock_outline</i>
					<input name="password" id="password" type="password">
					<label for="password">Password</label>
				</div>
			</div>
			<div class="row margin">
				<div class="input-field col s12">
					<i class="material-icons prefix">lock_outline</i>
					<input id="password-again" type="password">
					<label for="password-again">Password again</label>
				</div>
			</div>
			<div class="row">
				<div class="input-field col s12">
					<button disabled id="reg" type='submit' class="btn waves-effect waves-light col s12" style="background-color:#ff5a92">Register
						Now</button>
				</div>
				<div class="input-field col s12">
					<p class="margin center medium-small sign-up">Already have an account? <a href="#" onclick="submit()">Login</a>
					</p>
				</div>
			</div>
		</form>
	</div>
</div>


<!-- ================================================
  Scripts
  ================================================ -->

<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/materialize.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/custom.js') }}"></script>

<script type="text/javascript">

function submit() {

}
function setTextInputWrong(field, message) {
setTextInputNothing(field)
    var label = document.querySelectorAll("label[for=" + $(field).attr("id") + "]");
    if (label != null)
        $(label).attr("data-error", message);
    $(field).addClass("invalid");
}

function setTextInputSuccess(field, message) {
setTextInputNothing(field)
    var label = document.querySelectorAll("label[for=" + $(field).attr("id") + "]");
    if (label != null)
        $(label).attr("data-success", message);
    $(field).addClass("valid");
}

function setTextInputNothing(field) {
    var label = document.querySelectorAll("label[for=" + $(field).attr("id") + "]");
    if (label != null)
        $(label).attr("data-success", "");
        $(label).attr("data-error", "");
    $(field).removeClass();
}

function checkComplete(){
	if ($("#username")[0].classList[$("#username")[0].classList.length-1] == "valid" && $("#email")[0].classList[$("#email")[0].classList.length-1] == "valid" && $("#password")[0].classList[$("#password")[0].classList.length-1] == "valid" && $("#password-again")[0].classList[$("#password-again")[0].classList.length-1] == "valid"){
		$("#reg").removeAttr("disabled");
	}
	else {
		$("#reg").attr("disabled", "disabled");
	}
}
	$('#username').bind('input propertychange', function() {
		uname = $(this);
		setTextInputNothing(uname)
		if (uname.val() == ""){
		setTextInputNothing(uname)
		}
		else {
			$.ajax({
				type: 'POST',
				url: '{{ url_for('check_username')}}',
				data: '{"name": "' + uname.val() + '"}',
				contentType: 'application/json; charset=utf-8',
				dataType: 'json',
				unameval: uname.val(),
				success: function(data){
					console.log(this.unameval, uname.val(), uname.val() == this.unameval)
					if (uname.val() == this.unameval){
						if (data == false) {
							setTextInputWrong(uname, "Username in use")
						}
						if (data == true) {
							setTextInputSuccess(uname, "Great username!")
						}
					}
				}
			})
		}
		checkComplete()
	});

	$('#password-again').bind('input propertychange', function() {
		if ($(this).val() == ""){
			setTextInputNothing($(this))
			}
		else {
			if ($(this).val() == $("#password").val()){
				setTextInputSuccess($(this), "")
			}
			else {
				setTextInputWrong($(this), "")
			}
		}
		checkComplete()
	});

	$('#password').bind('input propertychange', function() {
		if ($(this).val() == ""){
			setTextInputNothing($(this))
			}
		else {
			if ($(this).val().length > 5){
				setTextInputSuccess($(this), "")
			}
			else {
				setTextInputWrong($(this), "Too short")
			}
		}
		checkComplete()
	});

	$('#email').bind('input propertychange', function() {
		var email = $(this);
		var atpos = email.val().indexOf("@");
		var dotpos = email.val().lastIndexOf(".");
		if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.val().length) {
			setTextInputWrong($(this), "")
		}
		else {
			setTextInputNothing($(this))
			$.ajax({
				type: 'POST',
				url: '{{ url_for('check_email')}}',
				data: '{"email": "' + email.val() + '"}',
				contentType: 'application/json; charset=utf-8',
				dataType: 'json',
				emailval: email.val(),
				success: function(data){
					console.log(this.unameval, uname.val(), uname.val() == this.unameval)
					if (email.val() == this.emailval){
						if (data == false) {
							setTextInputWrong(email, "Email in use")
						}
						if (data == true) {
							setTextInputSuccess(email, "")
						}
					}
				}
			})
		}
		checkComplete()
	});

</script>

</body>


<!-- Mirrored from demo.geekslabs.com/materialize/v3.1/user-login.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Aug 2017 19:31:40 GMT -->
</html>